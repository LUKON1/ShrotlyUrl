import{u as g,h as m,r as l,j as e,A as f,L as u,C as p,b as j}from"./index-C4cYWEIE.js";import{U as b,A as N}from"./UrlCard-ybN8EEeo.js";import{N as v,H as y}from"./h1-Dy1b5NDE.js";function P(){const{t:s}=g(),{shareId:a}=m(),[t,d]=l.useState(null),[h,n]=l.useState(!0),[c,o]=l.useState(null),i=l.useRef();return l.useEffect(()=>{const x=async()=>{try{console.log("SharePage: Fetching data for shareId:",a),n(!0),o(null);const r=await j.get(`/share/${a}`);console.log("SharePage: Response received:",r),d(r.data),console.log("SharePage: Data set:",r.data)}catch(r){console.error("SharePage: Error in fetchUrlData:",r),r.response?(console.error("SharePage: Server error:",r.response.status,r.response.data),o(`Server error: ${r.response.status} - ${r.response.data.error||r.response.data}`)):r.request?(console.error("SharePage: No response received:",r.request),o("Network error: No response from server")):(console.error("SharePage: Request setup error:",r.message),o(`Request error: ${r.message}`))}finally{n(!1)}};a?(console.log("SharePage: shareId found, calling fetchUrlData"),x()):(console.log("SharePage: No shareId found in params"),n(!1),o("No share ID provided"))},[a]),h?e.jsx("div",{className:"flex min-h-screen w-screen flex-col items-center justify-center bg-white dark:bg-slate-900",children:e.jsx(f,{})}):c?e.jsx("div",{className:"flex min-h-screen w-screen flex-col items-center justify-center bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold text-red-600 dark:text-red-400",children:s("shared.error")}),e.jsx("p",{className:"mb-8 text-gray-600 dark:text-gray-400",children:c}),e.jsx(u,{to:p.HOME,className:"rounded-lg bg-sky-500 px-6 py-2 text-white transition-colors hover:bg-sky-600",children:s("shared.homepage")})]})}):e.jsxs(e.Fragment,{children:[e.jsx(v,{ref:i}),e.jsx("div",{className:"flex min-h-screen w-full flex-col items-center px-4 pb-20",children:e.jsxs("div",{className:"w-full max-w-7xl",children:[e.jsx("div",{className:"mb-8",children:e.jsx(y,{children:s("shared.title")})}),t&&e.jsxs(e.Fragment,{children:[e.jsx(b,{mode:"share",urlData:t,t:s,onCopy:()=>{navigator.clipboard.writeText(`https://shortlyurl.ru/${t.shortCode}`),i.current?.addNotification(s("homepage.copied"),2e3)}}),e.jsx("div",{className:"relative z-10 mt-2 mb-8 rounded-lg border border-gray-200 bg-white p-4 shadow-lg transition-transform hover:shadow-xl sm:p-6 dark:border-slate-700 dark:bg-slate-800",children:e.jsx(N,{chartData:t.chartData,analyticsData:t,urlId:a,t:s})})]})]})})]})}export{P as default};
