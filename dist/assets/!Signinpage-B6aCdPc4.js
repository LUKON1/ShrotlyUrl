import{a as b,r as o,c as j,u as p,j as e,m as d,L as k,C as x,b as v}from"./index-DkjFw5uD.js";import{N as y,H as R}from"./h1-BEab7K-b.js";import{P as I,R as S}from"./PasswordInput-KZ_isS5_.js";import{P}from"./wrapper_home-Dh9MpYgq.js";function T(){const n="/user/login",{setAuth:f}=b(),[i,u]=o.useState(""),[c,l]=o.useState(""),g=o.useRef(),h=j(),r=o.useRef(),{t:s}=p();o.useEffect(()=>{g.current.focus()},[]);const m=async a=>{a.preventDefault();try{const t=await v.post(n,JSON.stringify({user:i,pwd:c}),{headers:{"Content-Type":"application/json"},withCredentials:!0}),w=t?.data?.accessToken,N=t?.data?.userId;f({user:i,pwd:c,accessToken:w,userId:N}),u(""),l(""),h(x.PROFILE)}catch(t){t?.response?t.response.status===429?r.current?.addNotification(t.response.data.error||s("message.ratelimit"),5e3):t.response.data&&t.response.data.error?r.current?.addNotification(t.response.data.error,3e3):r.current?.addNotification(s("registration.incorrectpwdus"),3e3):r.current?.addNotification(s("message.servererror"),3e3)}};return e.jsxs(e.Fragment,{children:[e.jsx(y,{ref:r}),e.jsxs(d.form,{onSubmit:m,className:"flex flex-col gap-5 rounded-2xl border border-gray-200 bg-white p-8 shadow-xl dark:border-slate-700 dark:bg-slate-800",transition:{duration:.2,ease:"easeOut"},children:[e.jsx(d.input,{ref:g,className:"text-1xl h-16 w-3xs max-w-5xl rounded-lg border-2 border-sky-400 bg-white p-2 text-center text-gray-900 shadow-sm focus:ring-2 focus:ring-sky-500 focus:outline-none md:w-[55vw] md:text-2xl lg:h-20 lg:w-[70vw] lg:text-3xl dark:border-sky-500 dark:bg-slate-700 dark:text-gray-100",type:"text",placeholder:s("registration.loginPlaceholder"),value:i,onChange:a=>{u(a.target.value)},whileFocus:{scale:1.02},transition:{duration:.2,ease:"easeOut"},required:!0}),e.jsx(I,{className:"text-1xl h-16",placeholder:s("registration.passwordPlaceholder"),value:c,onChange:a=>l(a.target.value),required:!0,minLength:5}),e.jsx(S,{children:s("registration.submit")}),e.jsx(d.div,{whileHover:{scale:1.05},transition:{duration:.2,ease:"easeOut"},children:e.jsx(k,{className:"text-lg text-sky-600 underline dark:text-sky-400",to:x.REGISTRATION,children:s("registration.donthaveacc")})})]})]})}function A(){const{t:n}=p();return e.jsxs(P,{children:[e.jsx(R,{children:n("registration.login")}),e.jsx(T,{})]})}export{A as default};
