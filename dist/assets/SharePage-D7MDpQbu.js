import{r as n,u as ue,ae as pe,j as p,a9 as he,L as fe,C as ve,b as me}from"./index-ajNjwp0T.js";import{m as _,E as M,b7 as xe,ao as q,ap as Y,at as ye,ar as ge,as as z,av as Pe,r as Z,T as be,aw as X,V as Ie,ax as Ae,ay as Ee,N as J,$ as Se,aA as Le,aD as je,aE as ke,aB as we,u as De,c as Ne,aF as Ce,aG as Oe,_ as Re,Z as Te,aH as _e,aI as We,z as Q,aJ as U,aL as V,a0 as Ke,a1 as Be,a3 as w,ad as Fe,aN as $e,aO as ze,ac as Ue,U as Ve,aP as Ge,aZ as He,aY as Me,b4 as qe,a_ as Ye,b1 as Ze,b2 as Xe,b3 as Je,a$ as Qe}from"./UrlCard-vF7UG306.js";import{N as ea,H as aa}from"./h1-2Fag2-gu.js";var ta=["children"];function ra(e,a){if(e==null)return{};var r,t,i=na(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function na(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var ia={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},sa=n.createContext(ia);function oa(e){var{children:a}=e,r=ra(e,ta);return n.createElement(sa.Provider,{value:r},a)}var ee=(e,a,r,t)=>q(e,"xAxis",a,t),ae=(e,a,r,t)=>Y(e,"xAxis",a,t),te=(e,a,r,t)=>q(e,"yAxis",r,t),re=(e,a,r,t)=>Y(e,"yAxis",r,t),la=_([M,ee,te,ae,re],(e,a,r,t,i)=>ge(e,"xAxis")?z(a,t,!1):z(r,i,!1)),ca=(e,a,r,t,i)=>i;function da(e){return e.type==="line"}var ua=_([ye,ca],(e,a)=>e.filter(da).find(r=>r.id===a)),pa=_([M,ee,te,ae,re,ua,la,xe],(e,a,r,t,i,s,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:o}=c;if(!(s==null||a==null||r==null||t==null||i==null||t.length===0||i.length===0||l==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:h,data:v}=s,f;if(v!=null&&v.length>0?f=v:f=d?.slice(u,o+1),f!=null)return Ca({layout:e,xAxis:a,yAxis:r,xAxisTicks:t,yAxisTicks:i,dataKey:h,bandSize:l,displayedData:f})}}),ha=["id"],fa=["type","layout","connectNulls","needClip","shape"],va=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function D(){return D=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var t in r)({}).hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},D.apply(null,arguments)}function G(e,a){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,t)}return r}function b(e){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?G(Object(r),!0).forEach(function(t){ma(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ma(e,a,r){return(a=xa(a))in e?Object.defineProperty(e,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[a]=r,e}function xa(e){var a=ya(e,"string");return typeof a=="symbol"?a:a+""}function ya(e,a){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var t=r.call(e,a);if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(e)}function W(e,a){if(e==null)return{};var r,t,i=ga(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)r=s[t],a.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function ga(e,a){if(e==null)return{};var r={};for(var t in e)if({}.hasOwnProperty.call(e,t)){if(a.indexOf(t)!==-1)continue;r[t]=e[t]}return r}var Pa=e=>{var{dataKey:a,name:r,stroke:t,legendType:i,hide:s}=e;return[{inactive:s,dataKey:a,type:i,color:t,value:J(r,a),payload:e}]},ba=n.memo(e=>{var{dataKey:a,data:r,stroke:t,strokeWidth:i,fill:s,name:l,hide:c,unit:d,tooltipType:u,id:o}=e,h={dataDefinedOnItem:r,getPosition:Le,settings:{stroke:t,strokeWidth:i,fill:s,dataKey:a,nameKey:void 0,name:J(l,a),hide:c,type:u,color:t,unit:d,graphicalItemId:o}};return n.createElement(Se,{tooltipEntrySettings:h})}),ne=(e,a)=>"".concat(a,"px ").concat(e-a,"px");function Ia(e,a){for(var r=e.length%2!==0?[...e,0]:e,t=[],i=0;i<a;++i)t=[...t,...r];return t}var Aa=(e,a,r)=>{var t=r.reduce((f,x)=>f+x);if(!t)return ne(a,e);for(var i=Math.floor(e/t),s=e%t,l=a-e,c=[],d=0,u=0;d<r.length;u+=(o=r[d])!==null&&o!==void 0?o:0,++d){var o,h=r[d];if(h!=null&&u+h>s){c=[...r.slice(0,d),s-u];break}}var v=c.length%2===0?[0,l]:[l];return[...Ia(r,i),...c,...v].map(f=>"".concat(f,"px")).join(", ")};function Ea(e){var{clipPathId:a,points:r,props:t}=e,{dot:i,dataKey:s,needClip:l}=t,{id:c}=t,d=W(t,ha),u=Ve(d);return n.createElement(Ge,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:s,baseProps:u,needClip:l,clipPathId:a})}function Sa(e){var{showLabels:a,children:r,points:t}=e,i=n.useMemo(()=>t?.map(s=>{var l,c,d={x:(l=s.x)!==null&&l!==void 0?l:0,y:(c=s.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return b(b({},d),{},{value:s.value,payload:s.payload,viewBox:d,parentViewBox:void 0,fill:void 0})}),[t]);return n.createElement($e,{value:a?i:void 0},r)}function H(e){var{clipPathId:a,pathRef:r,points:t,strokeDasharray:i,props:s}=e,{type:l,layout:c,connectNulls:d,needClip:u,shape:o}=s,h=W(s,fa),v=b(b({},ze(h)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(a,")"):void 0,points:t,type:l,layout:c,connectNulls:d,strokeDasharray:i??s.strokeDasharray});return n.createElement(n.Fragment,null,t?.length>1&&n.createElement(Ue,D({shapeType:"curve",option:o},v,{pathRef:r})),n.createElement(Ea,{points:t,clipPathId:a,props:s}))}function La(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function ja(e){var{clipPathId:a,props:r,pathRef:t,previousPointsRef:i,longestAnimatedLengthRef:s}=e,{points:l,strokeDasharray:c,isAnimationActive:d,animationBegin:u,animationDuration:o,animationEasing:h,animateNewValues:v,width:f,height:x,onAnimationEnd:m,onAnimationStart:A}=r,I=i.current,y=Ke(l,"recharts-line-"),g=n.useRef(y),[L,j]=n.useState(!1),C=!L,O=n.useCallback(()=>{typeof m=="function"&&m(),j(!1)},[m]),R=n.useCallback(()=>{typeof A=="function"&&A(),j(!0)},[A]),E=La(t.current),N=n.useRef(0);g.current!==y&&(N.current=s.current,g.current=y);var K=N.current;return n.createElement(Sa,{points:l,showLabels:C},r.children,n.createElement(Be,{animationId:y,begin:u,duration:o,isActive:d,easing:h,onAnimationEnd:O,onAnimationStart:R,key:y},S=>{var oe=w(K,E+K,S),T=Math.min(oe,E),k;if(d)if(c){var le="".concat(c).split(/[,\s]+/gim).map(P=>parseFloat(P));k=Aa(T,E,le)}else k=ne(E,T);else k=c==null?void 0:String(c);if(S>0&&E>0&&(i.current=l,s.current=Math.max(s.current,T)),I){var ce=I.length/l.length,B=S===1?l:l.map((P,de)=>{var F=Math.floor(de*ce);if(I[F]){var $=I[F];return b(b({},P),{},{x:w($.x,P.x,S),y:w($.y,P.y,S)})}return v?b(b({},P),{},{x:w(f*2,P.x,S),y:w(x/2,P.y,S)}):b(b({},P),{},{x:P.x,y:P.y})});return i.current=B,n.createElement(H,{props:r,points:B,clipPathId:a,pathRef:t,strokeDasharray:k})}return n.createElement(H,{props:r,points:l,clipPathId:a,pathRef:t,strokeDasharray:k})}),n.createElement(Fe,{label:r.label}))}function ka(e){var{clipPathId:a,props:r}=e,t=n.useRef(null),i=n.useRef(0),s=n.useRef(null);return n.createElement(ja,{props:r,clipPathId:a,previousPointsRef:t,longestAnimatedLengthRef:i,pathRef:s})}var wa=(e,a)=>{var r,t;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(t=e.y)!==null&&t!==void 0?t:void 0,value:e.value,errorVal:Q(e.payload,a)}};class Da extends n.Component{render(){var{hide:a,dot:r,points:t,className:i,xAxisId:s,yAxisId:l,top:c,left:d,width:u,height:o,id:h,needClip:v,zIndex:f}=this.props;if(a)return null;var x=Ne("recharts-line",i),m=h,{r:A,strokeWidth:I}=Ce(r),y=Oe(r),g=A*2+I,L=v?"url(#clipPath-".concat(y?"":"dots-").concat(m,")"):void 0;return n.createElement(Re,{zIndex:f},n.createElement(Te,{className:x},v&&n.createElement("defs",null,n.createElement(_e,{clipPathId:m,xAxisId:s,yAxisId:l}),!y&&n.createElement("clipPath",{id:"clipPath-dots-".concat(m)},n.createElement("rect",{x:d-g/2,y:c-g/2,width:u+g,height:o+g}))),n.createElement(oa,{xAxisId:s,yAxisId:l,data:t,dataPointFormatter:wa,errorBarOffset:0},n.createElement(ka,{props:this.props,clipPathId:m}))),n.createElement(We,{activeDot:this.props.activeDot,points:t,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:L}))}}var ie={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:be.line,type:"linear"};function Na(e){var a=Z(e,ie),{activeDot:r,animateNewValues:t,animationBegin:i,animationDuration:s,animationEasing:l,connectNulls:c,dot:d,hide:u,isAnimationActive:o,label:h,legendType:v,xAxisId:f,yAxisId:x,id:m}=a,A=W(a,va),{needClip:I}=je(f,x),y=ke(),g=we(),L=X(),j=De(N=>pa(N,f,x,L,m));if(g!=="horizontal"&&g!=="vertical"||j==null||y==null)return null;var{height:C,width:O,x:R,y:E}=y;return n.createElement(Da,D({},A,{id:m,connectNulls:c,dot:d,activeDot:r,animateNewValues:t,animationBegin:i,animationDuration:s,animationEasing:l,isAnimationActive:o,hide:u,label:h,legendType:v,xAxisId:f,yAxisId:x,points:j,layout:g,height:C,width:O,left:R,top:E,needClip:I}))}function Ca(e){var{layout:a,xAxis:r,yAxis:t,xAxisTicks:i,yAxisTicks:s,dataKey:l,bandSize:c,displayedData:d}=e;return d.map((u,o)=>{var h=Q(u,l);if(a==="horizontal"){var v=U({axis:r,ticks:i,bandSize:c,entry:u,index:o}),f=V(h)?null:t.scale.map(h);return{x:v,y:f??null,value:h,payload:u}}var x=V(h)?null:r.scale.map(h),m=U({axis:t,ticks:s,bandSize:c,entry:u,index:o});return x==null||m==null?null:{x,y:m,value:h,payload:u}}).filter(Boolean)}function Oa(e){var a=Z(e,ie),r=X();return n.createElement(Ie,{id:a.id,type:"line"},t=>n.createElement(n.Fragment,null,n.createElement(Ae,{legendPayload:Pa(a)}),n.createElement(ba,{dataKey:a.dataKey,data:a.data,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,unit:a.unit,tooltipType:a.tooltipType,id:t}),n.createElement(Ee,{type:"line",id:t,data:a.data,xAxisId:a.xAxisId,yAxisId:a.yAxisId,zAxisId:0,dataKey:a.dataKey,hide:a.hide,isPanorama:r}),n.createElement(Na,D({},a,{id:t}))))}var se=n.memo(Oa,Pe);se.displayName="Line";var Ra=["axis"],Ta=n.forwardRef((e,a)=>n.createElement(He,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ra,tooltipPayloadSearcher:Me,categoricalChartProps:e,ref:a}));function Ba(){const{t:e}=ue(),{shareId:a}=pe(),[r,t]=n.useState(null),[i,s]=n.useState(!0),[l,c]=n.useState(null),d=n.useRef();return n.useEffect(()=>{const u=async()=>{try{console.log("SharePage: Fetching data for shareId:",a),s(!0),c(null);const o=await me.get(`/share/${a}`);console.log("SharePage: Response received:",o),t(o.data),console.log("SharePage: Data set:",o.data)}catch(o){console.error("SharePage: Error in fetchUrlData:",o),o.response?(console.error("SharePage: Server error:",o.response.status,o.response.data),c(`Server error: ${o.response.status} - ${o.response.data.error||o.response.data}`)):o.request?(console.error("SharePage: No response received:",o.request),c("Network error: No response from server")):(console.error("SharePage: Request setup error:",o.message),c(`Request error: ${o.message}`))}finally{s(!1)}};a?(console.log("SharePage: shareId found, calling fetchUrlData"),u()):(console.log("SharePage: No shareId found in params"),s(!1),c("No share ID provided"))},[a]),i?p.jsx("div",{className:"flex min-h-screen w-screen flex-col items-center justify-center bg-white dark:bg-slate-900",children:p.jsx(he,{})}):l?p.jsx("div",{className:"flex min-h-screen w-screen flex-col items-center justify-center bg-white dark:bg-slate-900",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"mb-4 text-2xl font-bold text-red-600 dark:text-red-400",children:e("shared.error")}),p.jsx("p",{className:"mb-8 text-gray-600 dark:text-gray-400",children:l}),p.jsx(fe,{to:ve.HOME,className:"rounded-lg bg-sky-500 px-6 py-2 text-white transition-colors hover:bg-sky-600",children:e("shared.homepage")})]})}):p.jsxs(p.Fragment,{children:[p.jsx(ea,{ref:d}),p.jsx("div",{className:"flex min-h-screen w-full flex-col items-center px-4 pb-20",children:p.jsxs("div",{className:"w-full max-w-2xl",children:[p.jsx("div",{className:"mb-8",children:p.jsx(aa,{children:e("shared.title")})}),r&&p.jsx(qe,{mode:"share",urlData:r,t:e,onCopy:()=>{navigator.clipboard.writeText(`https://shortlyurl.ru/${r.shortCode}`),d.current?.addNotification(e("homepage.copied"),2e3)}}),p.jsxs("div",{className:"relative z-10 mt-2 mb-8 rounded-lg border border-gray-200 bg-white p-4 shadow-lg hover:shadow-xl sm:p-6 dark:border-slate-700 dark:bg-slate-800",style:{transition:"var(--transition-bg)"},children:[p.jsx("h3",{className:"mb-4 text-center text-2xl font-bold text-gray-800 dark:text-gray-200",children:e("shared.clickHistory")}),p.jsx(Ye,{width:"100%",height:300,minWidth:200,minHeight:200,children:p.jsxs(Ta,{data:r.chartData,margin:{top:5,right:30,left:20,bottom:30},children:[p.jsx(Ze,{strokeDasharray:"3 3",className:"stroke-gray-300 dark:stroke-gray-600"}),p.jsx(Xe,{dataKey:"date",className:"fill-gray-700 dark:fill-gray-300"}),p.jsx(Je,{className:"fill-gray-700 dark:fill-gray-300"}),p.jsx(Qe,{contentStyle:{backgroundColor:"rgb(30 41 59)",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"}}),p.jsx(se,{type:"monotone",dataKey:"clicks",stroke:"#8884d8",activeDot:{r:8},name:"Clicks"})]})})]})]})})]})}export{Ba as default};
