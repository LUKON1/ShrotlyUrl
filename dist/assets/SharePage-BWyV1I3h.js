import{u as g,i as f,r as t,j as e,A as m,L as u,C as p,b as y}from"./index-Dez0CR5C.js";import{aA as b,as as j,au as N,av as k,aw as v,ay as S,at as w,az as P}from"./UrlCard-BDz8s71N.js";import{N as C,H as D}from"./h1--mwmPOR5.js";function I(){const{t:a}=g(),{shareId:o}=f(),[l,d]=t.useState(null),[h,n]=t.useState(!0),[i,s]=t.useState(null),c=t.useRef();return t.useEffect(()=>{const x=async()=>{try{console.log("SharePage: Fetching data for shareId:",o),n(!0),s(null);const r=await y.get(`/share/${o}`);console.log("SharePage: Response received:",r),d(r.data),console.log("SharePage: Data set:",r.data)}catch(r){console.error("SharePage: Error in fetchUrlData:",r),r.response?(console.error("SharePage: Server error:",r.response.status,r.response.data),s(`Server error: ${r.response.status} - ${r.response.data.error||r.response.data}`)):r.request?(console.error("SharePage: No response received:",r.request),s("Network error: No response from server")):(console.error("SharePage: Request setup error:",r.message),s(`Request error: ${r.message}`))}finally{n(!1)}};o?(console.log("SharePage: shareId found, calling fetchUrlData"),x()):(console.log("SharePage: No shareId found in params"),n(!1),s("No share ID provided"))},[o]),h?e.jsx("div",{className:"flex min-h-screen w-screen flex-col items-center justify-center bg-white dark:bg-slate-900",children:e.jsx(m,{})}):i?e.jsx("div",{className:"flex min-h-screen w-screen flex-col items-center justify-center bg-white dark:bg-slate-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"mb-4 text-2xl font-bold text-red-600 dark:text-red-400",children:a("shared.error")}),e.jsx("p",{className:"mb-8 text-gray-600 dark:text-gray-400",children:i}),e.jsx(u,{to:p.HOME,className:"rounded-lg bg-sky-500 px-6 py-2 text-white transition-colors hover:bg-sky-600",children:a("shared.homepage")})]})}):e.jsxs(e.Fragment,{children:[e.jsx(C,{ref:c}),e.jsx("div",{className:"flex min-h-screen w-full flex-col items-center px-4 pb-20",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsx("div",{className:"mb-8",children:e.jsx(D,{children:a("shared.title")})}),l&&e.jsx(b,{mode:"share",urlData:l,t:a,onCopy:()=>{navigator.clipboard.writeText(`https://shortlyurl.ru/${l.shortCode}`),c.current?.addNotification(a("homepage.copied"),2e3)}}),e.jsxs("div",{className:"relative z-10 mt-2 mb-8 rounded-lg border border-gray-200 bg-white p-4 shadow-lg hover:shadow-xl sm:p-6 dark:border-slate-700 dark:bg-slate-800",style:{transition:"var(--transition-bg)"},children:[e.jsx("h3",{className:"mb-4 text-center text-2xl font-bold text-gray-800 dark:text-gray-200",children:a("shared.clickHistory")}),e.jsx(j,{width:"100%",height:300,minWidth:200,minHeight:200,children:e.jsxs(N,{data:l.chartData,margin:{top:5,right:30,left:20,bottom:30},children:[e.jsx(k,{strokeDasharray:"3 3",className:"stroke-gray-300 dark:stroke-gray-600"}),e.jsx(v,{dataKey:"date",className:"fill-gray-700 dark:fill-gray-300"}),e.jsx(S,{className:"fill-gray-700 dark:fill-gray-300"}),e.jsx(w,{contentStyle:{backgroundColor:"rgb(30 41 59)",border:"none",borderRadius:"8px"},labelStyle:{color:"#fff"},itemStyle:{color:"#fff"}}),e.jsx(P,{type:"monotone",dataKey:"clicks",stroke:"#8884d8",activeDot:{r:8},name:"Clicks"})]})})]})]})})]})}export{I as default};
