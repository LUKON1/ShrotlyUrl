import{r as i,d as at,j as s,u as _,c as ue,A as Ie,m as K,e as ye,f as Re,T as me,g as rt}from"./index-Dez0CR5C.js";import{u as V}from"./useAxiosPrivate-Bdy82_hh.js";import{r as H,c as ae,a as _e,S as nt,b as st,u as F,s as lt,d as it,e as ot,f as ct,g as dt,h as ut,i as W,j as mt,k as xe,l as ft,m as N,p as G,n as ht,o as gt,q as M,t as vt,v as pt,w as Me,x as yt,y as xt,z as I,A as bt,B as jt,C as kt,D as wt,E as $e,F as Pt,G as At,H as Ot,I as Nt,J as Ke,K as Ct,L as Et,M as St,N as Fe,O as Dt,P as Lt,Q as Tt,R as It,T as ze,U as Be,V as Rt,W as _t,X as We,Y as Mt,Z as z,_ as Ue,$ as $t,a0 as Kt,a1 as Ft,a2 as zt,a3 as be,a4 as je,a5 as Q,a6 as Bt,a7 as Wt,a8 as Ut,a9 as Vt,aa as Ht,ab as Gt,ac as Yt,ad as qt,ae as Zt,af as U,ag as ie,ah as ke,ai as Xt,aj as Jt,ak as Qt,al as ea,am as ta,an as aa,ao as ra,ap as na,aq as sa,ar as la,as as fe,at as he,au as Ve,av as He,aw as Ge,ax as we,ay as Ye,az as oe,aA as ia,aB as oa,aC as ca}from"./UrlCard-BDz8s71N.js";import{N as da,H as ua}from"./h1--mwmPOR5.js";const ma=async(e,t=3,a=1e3)=>{let r;for(let n=0;n<=t;n++)try{return await e()}catch(l){if(r=l,l.response?.status===401||l.response?.status===403||n===t)throw l;const o=a*Math.pow(2,n)+Math.random()*1e3;await new Promise(d=>setTimeout(d,o))}throw r};function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ee.apply(null,arguments)}function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function fa(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Pe(Object(a),!0).forEach(function(r){ha(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ha(e,t,a){return(t=ga(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ga(e){var t=va(e,"string");return typeof t=="symbol"?t:t+""}function va(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D=32,pa={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function ya(e){var{data:t,iconType:a,inactiveColor:r}=e,n=D/2,l=D/6,o=D/3,d=t.inactive?r:t.color,c=a??t.type;if(c==="none")return null;if(c==="plainline"){var m;return i.createElement("line",{strokeWidth:4,fill:"none",stroke:d,strokeDasharray:(m=t.payload)===null||m===void 0?void 0:m.strokeDasharray,x1:0,y1:n,x2:D,y2:n,className:"recharts-legend-icon"})}if(c==="line")return i.createElement("path",{strokeWidth:4,fill:"none",stroke:d,d:"M0,".concat(n,"h").concat(o,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(2*o,",").concat(n,`
            H`).concat(D,"M").concat(2*o,",").concat(n,`
            A`).concat(l,",").concat(l,",0,1,1,").concat(o,",").concat(n),className:"recharts-legend-icon"});if(c==="rect")return i.createElement("path",{stroke:"none",fill:d,d:"M0,".concat(D/8,"h").concat(D,"v").concat(D*3/4,"h").concat(-D,"z"),className:"recharts-legend-icon"});if(i.isValidElement(t.legendIcon)){var f=fa({},t);return delete f.legendIcon,i.cloneElement(t.legendIcon,f)}return i.createElement(st,{fill:d,cx:n,cy:n,size:D,sizeType:"diameter",type:c})}function xa(e){var{payload:t,iconSize:a,layout:r,formatter:n,inactiveColor:l,iconType:o}=e,d={x:0,y:0,width:D,height:D},c={display:r==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((f,v)=>{var u=f.formatter||n,x=ae({"recharts-legend-item":!0,["legend-item-".concat(v)]:!0,inactive:f.inactive});if(f.type==="none")return null;var b=f.inactive?l:f.color,k=u?u(f.value,f,v):f.value;return i.createElement("li",ee({className:x,style:c,key:"legend-item-".concat(v)},_e(e,f,v)),i.createElement(nt,{width:a,height:a,viewBox:d,style:m,"aria-label":"".concat(k," legend icon")},i.createElement(ya,{data:f,iconType:o,inactiveColor:l})),i.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},k))})}var ba=e=>{var t=H(e,pa),{payload:a,layout:r,align:n}=t;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return i.createElement("ul",{className:"recharts-default-legend",style:l},i.createElement(xa,ee({},t,{payload:a})))};function ja(){return F(lt)}var ka=["contextPayload"];function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ce.apply(null,arguments)}function Ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ae(Object(a),!0).forEach(function(r){wa(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ae(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function wa(e,t,a){return(t=Pa(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pa(e){var t=Aa(e,"string");return typeof t=="symbol"?t:t+""}function Aa(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Oa(e,t){if(e==null)return{};var a,r,n=Na(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Na(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Ca(e){return e.value}function Ea(e){var{contextPayload:t}=e,a=Oa(e,ka),r=ft(t,e.payloadUniqBy,Ca),n=B(B({},a),{},{payload:r});return i.isValidElement(e.content)?i.cloneElement(e.content,n):typeof e.content=="function"?i.createElement(e.content,n):i.createElement(ba,n)}function Sa(e,t,a,r,n,l){var{layout:o,align:d,verticalAlign:c}=t,m,f;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(d==="center"&&o==="vertical"?m={left:((r||0)-l.width)/2}:m=d==="right"?{right:a&&a.right||0}:{left:a&&a.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?f={top:((n||0)-l.height)/2}:f=c==="bottom"?{bottom:a&&a.bottom||0}:{top:a&&a.top||0}),B(B({},m),f)}function Da(e){var t=W();return i.useEffect(()=>{t(mt(e))},[t,e]),null}function La(e){var t=W();return i.useEffect(()=>(t(xe(e)),()=>{t(xe({width:0,height:0}))}),[t,e]),null}function Ta(e,t,a,r){return e==="vertical"&&t!=null?{height:t}:e==="horizontal"?{width:a||r}:null}var Ia={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ge(e){var t=H(e,Ia),a=ja(),r=it(),n=ot(),{width:l,height:o,wrapperStyle:d,portal:c}=t,[m,f]=ct([a]),v=dt(),u=ut();if(v==null||u==null)return null;var x=v-(n?.left||0)-(n?.right||0),b=Ta(t.layout,o,l,x),k=c?d:B(B({position:"absolute",width:b?.width||l||"auto",height:b?.height||o||"auto"},Sa(d,t,n,v,u,m)),d),A=c??r;if(A==null||a==null)return null;var p=i.createElement("div",{className:"recharts-legend-wrapper",style:k,ref:f},i.createElement(Da,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&i.createElement(La,{width:m.width,height:m.height}),i.createElement(Ea,ce({},t,b,{margin:n,chartWidth:v,chartHeight:u,contextPayload:a})));return at.createPortal(p,A)}ge.displayName="Legend";var re=e=>null;re.displayName="Cell";var qe=e=>e.graphicalItems.polarItems,Ra=N([G,ht],gt),ne=N([qe,M,Ra],vt),_a=N([ne],pt),se=N([_a,Me],yt),Ma=N([se,M,ne],xt);N([se,M,ne],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(n=>{var l,o=I(r,(l=t.dataKey)!==null&&l!==void 0?l:n.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:I(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Oe=()=>{},$a=N([se,M,ne,bt,G],jt),Ka=N([M,kt,wt,Oe,$a,Oe,$e,G],Pt),Ze=N([M,$e,se,Ma,At,G,Ka],Ot),Fa=N([Ze,Nt,Ke],Ct),za=N([M,Ze,Fa,G],Et);N([Ke,za],St);function Ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ne(Object(a),!0).forEach(function(r){Ba(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ne(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ba(e,t,a){return(t=Wa(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Wa(e){var t=Ua(e,"string");return typeof t=="symbol"?t:t+""}function Ua(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Va=(e,t)=>t,ve=N([qe,Va],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Ha=[],pe=(e,t,a)=>a?.length===0?Ha:a,Xe=N([Me,ve,pe],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var n;if(t?.data!=null&&t.data.length>0?n=t.data:n=r,(!n||!n.length)&&a!=null&&(n=a.map(l=>Ce(Ce({},t.presentationProps),l.props))),n!=null)return n}}),Ga=N([Xe,ve,pe],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,n)=>{var l,o=I(r,t.nameKey,t.name),d;return a!=null&&(l=a[n])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?d=a[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?d=r.fill:d=t.fill,{value:Fe(o,t.dataKey),color:d,payload:r,type:t.legendType}})}),Ya=N([Xe,ve,pe,Dt],(e,t,a,r)=>{if(!(t==null||e==null))return pr({offset:r,pieSettings:t,displayedData:e,cells:a})}),qa=(e,t,a)=>{var r=W();return(n,l)=>o=>{e?.(n,l,o),r(Lt({activeIndex:String(l),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},Za=e=>{var t=W();return(a,r)=>n=>{e?.(a,r,n),t(Tt())}},Xa=(e,t,a)=>{var r=W();return(n,l)=>o=>{e?.(n,l,o),r(It({activeIndex:String(l),activeDataKey:t,activeCoordinate:n.tooltipPosition,activeGraphicalItemId:a}))}},Ja=["key"],Qa=["onMouseEnter","onClick","onMouseLeave"],er=["id"],tr=["id"];function Ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function w(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ee(Object(a),!0).forEach(function(r){ar(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ee(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ar(e,t,a){return(t=rr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function rr(e){var t=nr(e,"string");return typeof t=="symbol"?t:t+""}function nr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},R.apply(null,arguments)}function le(e,t){if(e==null)return{};var a,r,n=sr(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function sr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function lr(e){var t=i.useMemo(()=>We(e.children,re),[e.children]),a=F(r=>Ga(r,e.id,t));return a==null?null:i.createElement(Mt,{legendPayload:a})}var ir=i.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:n,strokeWidth:l,fill:o,name:d,hide:c,tooltipType:m,id:f}=e,v={dataDefinedOnItem:r.map(u=>u.tooltipPayload),getPosition:u=>{var x;return(x=r[Number(u)])===null||x===void 0?void 0:x.tooltipPosition},settings:{stroke:n,strokeWidth:l,fill:o,dataKey:t,nameKey:a,name:Fe(d,t),hide:c,type:m,color:o,unit:"",graphicalItemId:f}};return i.createElement($t,{tooltipEntrySettings:v})}),or=(e,t)=>e>t?"start":e<t?"end":"middle",cr=(e,t,a)=>typeof t=="function"?U(t(e),a,a*.8):U(t,a,a*.8),dr=(e,t,a)=>{var{top:r,left:n,width:l,height:o}=t,d=Zt(l,o),c=n+U(e.cx,l,l/2),m=r+U(e.cy,o,o/2),f=U(e.innerRadius,d,0),v=cr(a,e.outerRadius,d),u=e.maxRadius||Math.sqrt(l*l+o*o)/2;return{cx:c,cy:m,innerRadius:f,outerRadius:v,maxRadius:u}},ur=(e,t)=>{var a=Q(t-e),r=Math.min(Math.abs(t-e),360);return a*r},mr=(e,t)=>{if(i.isValidElement(e))return i.cloneElement(e,t);if(typeof e=="function")return e(t);var a=ae("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,n=le(t,Ja);return i.createElement(Xt,R({},n,{type:"linear",className:a}))},fr=(e,t,a)=>{if(i.isValidElement(e))return i.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),i.isValidElement(r)))return r;var n=ae("recharts-pie-label-text",Jt(e));return i.createElement(Qt,R({},t,{alignmentBaseline:"middle",className:n}),r)};function hr(e){var{sectors:t,props:a,showLabels:r}=e,{label:n,labelLine:l,dataKey:o}=a;if(!r||!n||!t)return null;var d=Be(a),c=ke(n),m=ke(l),f=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,v=t.map((u,x)=>{var b=(u.startAngle+u.endAngle)/2,k=ie(u.cx,u.cy,u.outerRadius+f,b),A=w(w(w(w({},d),u),{},{stroke:"none"},c),{},{index:x,textAnchor:or(k.x,u.cx)},k),p=w(w(w(w({},d),u),{},{fill:"none",stroke:u.fill},m),{},{index:x,points:[ie(u.cx,u.cy,u.outerRadius,b),k],key:"line"});return i.createElement(Ue,{zIndex:ze.label,key:"label-".concat(u.startAngle,"-").concat(u.endAngle,"-").concat(u.midAngle,"-").concat(x)},i.createElement(z,null,l&&mr(l,p),fr(n,A,I(u,o))))});return i.createElement(z,{className:"recharts-pie-labels"},v)}function gr(e){var{sectors:t,props:a,showLabels:r}=e,{label:n}=a;return typeof n=="object"&&n!=null&&"position"in n?i.createElement(qt,{label:n}):i.createElement(hr,{sectors:t,props:a,showLabels:r})}function vr(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:n,shape:l,id:o}=e,d=F(Wt),c=F(Ut),m=F(Vt),{onMouseEnter:f,onClick:v,onMouseLeave:u}=n,x=le(n,Qa),b=qa(f,n.dataKey,o),k=Za(u),A=Xa(v,n.dataKey,o);return t==null||t.length===0?null:i.createElement(i.Fragment,null,t.map((p,P)=>{if(p?.startAngle===0&&p?.endAngle===0&&t.length!==1)return null;var C=m==null||m===o,E=String(P)===d&&(c==null||n.dataKey===c)&&C,g=d?r:null,y=a&&E?a:g,h=w(w({},p),{},{stroke:p.stroke,tabIndex:-1,[Gt]:P,[Ht]:o});return i.createElement(z,R({key:"sector-".concat(p?.startAngle,"-").concat(p?.endAngle,"-").concat(p.midAngle,"-").concat(P),tabIndex:-1,className:"recharts-pie-sector"},_e(x,p,P),{onMouseEnter:b(p,P),onMouseLeave:k(p,P),onClick:A(p,P)}),i.createElement(Yt,R({option:l??y,index:P,shapeType:"sector",isActive:E},h)))}))}function pr(e){var t,{pieSettings:a,displayedData:r,cells:n,offset:l}=e,{cornerRadius:o,startAngle:d,endAngle:c,dataKey:m,nameKey:f,tooltipType:v}=a,u=Math.abs(a.minAngle),x=ur(d,c),b=Math.abs(x),k=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,A=r.filter(y=>I(y,m,0)!==0).length,p=(b>=360?A:A-1)*k,P=b-A*u-p,C=r.reduce((y,h)=>{var j=I(h,m,0);return y+(je(j)?j:0)},0),E;if(C>0){var g;E=r.map((y,h)=>{var j=I(y,m,0),O=I(y,f,h),S=dr(a,l,y),T=(je(j)?j:0)/C,L,$=w(w({},y),n&&n[h]&&n[h].props);h?L=g.endAngle+Q(x)*k*(j!==0?1:0):L=d;var Y=L+Q(x)*((j!==0?u:0)+T*P),q=(L+Y)/2,Z=(S.innerRadius+S.outerRadius)/2,X=[{name:O,value:j,payload:$,dataKey:m,type:v,graphicalItemId:a.id}],tt=ie(S.cx,S.cy,Z,q);return g=w(w(w(w({},a.presentationProps),{},{percent:T,cornerRadius:typeof o=="string"?parseFloat(o):o,name:O,tooltipPayload:X,midAngle:q,middleRadius:Z,tooltipPosition:tt},$),S),{},{value:j,dataKey:m,startAngle:L,endAngle:Y,payload:$,paddingAngle:Q(x)*k}),g})}return E}function yr(e){var{showLabels:t,sectors:a,children:r}=e,n=i.useMemo(()=>!t||!a?[]:a.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[a,t]);return i.createElement(Bt,{value:t?n:void 0},r)}function xr(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:n,isAnimationActive:l,animationBegin:o,animationDuration:d,animationEasing:c,activeShape:m,inactiveShape:f,onAnimationStart:v,onAnimationEnd:u}=t,x=Kt(t,"recharts-pie-"),b=a.current,[k,A]=i.useState(!1),p=i.useCallback(()=>{typeof u=="function"&&u(),A(!1)},[u]),P=i.useCallback(()=>{typeof v=="function"&&v(),A(!0)},[v]);return i.createElement(yr,{showLabels:!k,sectors:n},i.createElement(Ft,{animationId:x,begin:o,duration:d,isActive:l,easing:c,onAnimationStart:P,onAnimationEnd:p,key:x},C=>{var E,g=[],y=n&&n[0],h=(E=y?.startAngle)!==null&&E!==void 0?E:0;return n?.forEach((j,O)=>{var S=b&&b[O],T=O>0?zt(j,"paddingAngle",0):0;if(S){var L=be(S.endAngle-S.startAngle,j.endAngle-j.startAngle,C),$=w(w({},j),{},{startAngle:h+T,endAngle:h+L+T});g.push($),h=$.endAngle}else{var{endAngle:Y,startAngle:q}=j,Z=be(0,Y-q,C),X=w(w({},j),{},{startAngle:h+T,endAngle:h+Z+T});g.push(X),h=X.endAngle}}),a.current=g,i.createElement(z,null,i.createElement(vr,{sectors:g,activeShape:m,inactiveShape:f,allOtherPieProps:t,shape:t.shape,id:r}))}),i.createElement(gr,{showLabels:!k,sectors:n,props:t}),t.children)}var br={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ze.area};function jr(e){var{id:t}=e,a=le(e,er),{hide:r,className:n,rootTabIndex:l}=e,o=i.useMemo(()=>We(e.children,re),[e.children]),d=F(f=>Ya(f,t,o)),c=i.useRef(null),m=ae("recharts-pie",n);return r||d==null?(c.current=null,i.createElement(z,{tabIndex:l,className:m})):i.createElement(Ue,{zIndex:e.zIndex},i.createElement(ir,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),i.createElement(z,{tabIndex:l,className:m},i.createElement(xr,{props:w(w({},a),{},{sectors:d}),previousSectorsRef:c,id:t})))}function Je(e){var t=H(e,br),{id:a}=t,r=le(t,tr),n=Be(r);return i.createElement(Rt,{id:a,type:"pie"},l=>i.createElement(i.Fragment,null,i.createElement(_t,{type:"pie",id:l,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),i.createElement(lr,R({},r,{id:l})),i.createElement(jr,R({},r,{id:l}))))}Je.displayName="Pie";function kr(e){var t=W();return i.useEffect(()=>{t(ea(e))},[t,e]),null}var wr=["layout"];function de(){return de=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},de.apply(null,arguments)}function Pr(e,t){if(e==null)return{};var a,r,n=Ar(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function Ar(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Or={top:5,right:5,bottom:5,left:5},Qe={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Or,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Nr=i.forwardRef(function(t,a){var r,n=H(t.categoricalChartProps,Qe),{layout:l}=n,o=Pr(n,wr),{chartName:d,defaultTooltipEventType:c,validateTooltipEventTypes:m,tooltipPayloadSearcher:f}=t,v={chartName:d,defaultTooltipEventType:c,validateTooltipEventTypes:m,tooltipPayloadSearcher:f,eventEmitter:void 0};return i.createElement(ta,{preloadedState:{options:v},reduxStoreName:(r=n.id)!==null&&r!==void 0?r:d},i.createElement(aa,{chartData:n.data}),i.createElement(ra,{layout:l,margin:n.margin}),i.createElement(na,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),i.createElement(kr,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),i.createElement(sa,de({},o,{ref:a})))});function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Se(Object(a),!0).forEach(function(r){Cr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Cr(e,t,a){return(t=Er(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Er(e){var t=Sr(e,"string");return typeof t=="symbol"?t:t+""}function Sr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dr=["item"],Lr=De(De({},Qe),{},{layout:"centric",startAngle:0,endAngle:360}),Tr=i.forwardRef((e,t)=>{var a=H(e,Lr);return i.createElement(Nr,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Dr,tooltipPayloadSearcher:la,categoricalChartProps:a,ref:t})});const te=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#6366f1"],Ir=({active:e,payload:t})=>e&&t&&t.length?s.jsxs("div",{className:"rounded-lg border border-gray-200 bg-white p-3 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:t[0].name}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t[0].value," clicks"]})]}):null,Le=({data:e,title:t})=>{const a=e&&Object.keys(e).length>0,r=a?Object.keys(e).map(n=>({name:n,value:e[n]})).sort((n,l)=>l.value-n.value):[{name:"No Data",value:1}];return s.jsxs("div",{className:"flex flex-col rounded-xl border border-gray-200 bg-white p-6 shadow-lg transition-all duration-200 hover:shadow-xl dark:border-slate-700 dark:bg-slate-800",children:[s.jsx("h3",{className:"mb-2 text-center text-lg font-bold text-gray-800 dark:text-gray-100",children:t}),s.jsx("div",{className:"min-h-[250px] w-full flex-1",children:s.jsx(fe,{width:"100%",height:"100%",children:s.jsxs(Tr,{children:[s.jsx(Je,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:2,dataKey:"value",stroke:"none",children:r.map((n,l)=>s.jsx(re,{fill:a?te[l%te.length]:"#e5e7eb",className:"outline-none"},`cell-${l}`))}),s.jsx(he,{content:s.jsx(Ir,{})}),a&&s.jsx(ge,{verticalAlign:"bottom",height:36,iconType:"circle",wrapperStyle:{fontSize:"12px",paddingTop:"10px"}})]})})})]})},Te=({data:e,title:t})=>{const a=e&&Object.keys(e).length>0,r=a?Object.entries(e).sort((l,o)=>o[1]-l[1]).slice(0,8):[],n=r.length>0?r[0][1]:1;return s.jsxs("div",{className:"flex flex-col rounded-xl border border-gray-200 bg-white p-6 shadow-lg transition-all duration-200 hover:shadow-xl dark:border-slate-700 dark:bg-slate-800",children:[s.jsx("h3",{className:"mb-4 text-center text-lg font-bold text-gray-800 dark:text-gray-100",children:t}),s.jsx("div",{className:"flex flex-col gap-3",children:a?r.map(([l,o],d)=>{const c=Math.round(o/n*100);return s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"truncate font-medium text-gray-700 dark:text-gray-300",children:[d+1,". ",l]}),s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:o})]}),s.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-gray-100 dark:bg-slate-800",children:s.jsx("div",{className:"h-full rounded-full transition-all duration-500 ease-out",style:{width:`${c}%`,backgroundColor:te[d%te.length]}})})]},l)}):s.jsx("div",{className:"flex h-40 items-center justify-center text-sm text-gray-400 dark:text-gray-500",children:"No Data Available"})})]})},et=({devices:e={},browsers:t={},countries:a={},referrers:r={},t:n})=>s.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-4",children:[s.jsx(Le,{data:e,title:n("analytics.devices")||"Devices"}),s.jsx(Le,{data:t,title:n("analytics.browsers")||"Browsers"}),s.jsx(Te,{data:a,title:n("analytics.countries")||"Countries"}),s.jsx(Te,{data:r,title:n("analytics.referrers")||"Referrers"})]}),Rr=({urlId:e})=>{const{t}=_(),a=V(),[r,n]=i.useState([]),[l,o]=i.useState(null),[d,c]=i.useState(!0),[m,f]=i.useState(null);return i.useEffect(()=>{e&&(async()=>{try{c(!0),f(null);const u=await a.get(`/myurls/analytics/${e}`);n(u.data.chartData),o(u.data)}catch(u){f(t("myurls.analyticsError")),console.error("Failed to fetch analytics:",u)}finally{c(!1)}})()},[e,a,t]),d?s.jsx("div",{className:"flex items-center justify-center py-4 text-xl text-blue-600 dark:text-blue-400",children:t("myurls.loadingAnalytics")}):m?s.jsx("div",{className:"flex items-center justify-center py-8 text-xl text-red-600 dark:text-red-400",children:m}):s.jsxs("div",{className:"w-full",children:[s.jsx("h3",{className:"mb-4 text-center text-2xl font-bold text-gray-800 dark:text-gray-200",children:t("myurls.analytics")}),s.jsx("div",{className:"h-80 w-full",children:s.jsx(fe,{width:"100%",height:280,minWidth:200,aspect:void 0,children:s.jsxs(Ve,{data:r,margin:{top:5,right:30,left:20,bottom:30},children:[s.jsx(He,{strokeDasharray:"3 3",className:"stroke-gray-300 dark:stroke-gray-600"}),s.jsx(Ge,{dataKey:"date",className:"fill-gray-700 dark:fill-gray-300",tickFormatter:v=>we(v).format("DD/MM")}),s.jsx(Ye,{className:"fill-gray-700 dark:fill-gray-300"}),s.jsx(he,{contentStyle:{backgroundColor:"rgb(30 41 59)",border:"none",color:"#fff"},labelStyle:{color:"#fff"},itemStyle:{color:"#60a5fa"},labelFormatter:v=>`${t("myurls.date")}: ${we(v).format("DD/MM/YYYY")}`,formatter:(v,u)=>[v,t("myurls.clicks")]}),s.jsx(oe,{type:"monotone",dataKey:"clicks",stroke:"#8884d8",activeDot:{r:8},name:t("myurls.clicks")})]})},e)}),l&&s.jsx(et,{devices:l.devices,browsers:l.browsers,countries:l.countries,referrers:l.referrers,t})]})};function _r({urls:e,notificationRef:t,getMyUrls:a,updateUrl:r,removeUrl:n,isLoading:l}){const{t:o}=_(),d=ue(),c=V(),[m,f]=i.useState(""),[v,u]=i.useState(null),[x,b]=i.useState(new Set),k=i.useMemo(()=>m?e.filter(y=>y.url.toLowerCase().includes(m.toLowerCase())):e,[m,e]),A=g=>{u(v===g?null:g)},p=async g=>{try{const y=await c.patch(`/myurls/toggle/${g}`);r&&y.data?r(y.data):await a()}catch(y){console.error("Failed to toggle URL status:",y),t.current?.addNotification(o("myurls.loaderr"),3e3)}},P=i.useCallback(async(g,y)=>{try{const h=await c.patch(`/myurls/update-title/${g}`,{title:y});r&&h.data?r(h.data):await a()}catch(h){throw console.error("Failed to update URL title:",h),h}},[c,r,a]),C=i.useCallback(async(g,y)=>{try{const h=await c.patch(`/myurls/update-url/${g}`,{url:y});r&&h.data?r(h.data):await a()}catch(h){throw console.error("Failed to update URL:",h),h}},[c,r,a]),E=i.useCallback(async g=>{b(y=>new Set([...y,g]));try{await c.delete(`/myurls/${g}`),t.current?.addNotification(o("myurls.deleteSuccess"),2e3)}catch(y){console.error("Failed to delete URL:",y),b(h=>{const j=new Set(h);return j.delete(g),j}),t.current?.addNotification(o("myurls.deleteError"),3e3)}},[c,n,a,o,t]);return s.jsx(s.Fragment,{children:s.jsx("div",{className:"flex w-full flex-col items-center",style:{contain:"layout style"},children:s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mx-auto mb-4 flex h-12 w-full max-w-7xl flex-row items-center",children:[s.jsx("input",{type:"text",value:m,onChange:g=>{f(g.target.value)},placeholder:o("myurls.search"),className:"h-full w-full rounded-lg rounded-r-none border-2 border-sky-400 bg-white px-3 text-lg text-gray-900 focus:ring-2 focus:ring-sky-500 focus:outline-none dark:border-sky-500 dark:bg-slate-700 dark:text-gray-100"}),s.jsx("button",{onClick:a,className:"h-full w-12 touch-manipulation rounded-lg rounded-l-none border-2 border-l-0 border-sky-500 bg-sky-500 p-1 transition-colors hover:bg-sky-600 dark:border-sky-600 dark:bg-sky-600 dark:hover:bg-sky-700",type:"button",children:s.jsx("svg",{fill:"#FFFFFF",viewBox:"0 0 35 31.8",className:"hover:cursor-pointer",children:s.jsx("use",{href:"#reload"})})})]}),l?s.jsx("div",{className:"flex min-h-[50vh] flex-col justify-center",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(Ie,{})})}):s.jsx(s.Fragment,{children:k.length>0?s.jsx(K.ul,{className:"mx-auto w-full max-w-7xl px-0",layout:"position",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,layout:{duration:.4,ease:"easeOut"}},children:s.jsx(ye,{mode:"sync",children:k.map((g,y)=>s.jsxs(K.li,{className:v!==g._id?"mb-8":"",style:{willChange:"transform, opacity"},initial:{opacity:0,y:100},animate:x.has(g._id)?"exit":"enter",variants:{enter:{opacity:1,x:0,y:0},exit:{opacity:0,x:5e3,y:0}},transition:{ease:[.25,.46,.45,.94],delay:x.has(g._id)?0:y*.2},onAnimationComplete:h=>{h==="exit"&&x.has(g._id)&&(n?n(g._id):a(),b(j=>{const O=new Set(j);return O.delete(g._id),O}))},children:[s.jsx(ia,{mode:"myurls",urlData:g,onToggleAnalytics:()=>A(g._id),onToggleActive:()=>p(g._id),onDelete:()=>E(g._id),onUpdateTitle:P,onUpdateUrl:C,t:o,notificationRef:t}),s.jsx(ye,{mode:"wait",children:v===g._id&&s.jsx(K.div,{className:"relative z-10 mt-2 mb-8 rounded-lg border border-gray-200 bg-white p-4 shadow-lg transition-shadow hover:shadow-xl sm:p-6 dark:border-slate-700 dark:bg-slate-800",initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.3,ease:[.25,.46,.45,.94]},children:s.jsx(Rr,{urlId:g._id})})})]},g._id))})}):s.jsx("div",{className:"flex flex-col items-center justify-center py-20",children:s.jsx("div",{className:"max-w-md rounded-lg border border-gray-200 bg-white p-8 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-gray-100",children:"Нет URL-адресов"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Создайте вашу первую сокращенную ссылку"}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>d("/"),className:"inline-flex items-center rounded-md border border-transparent bg-sky-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-sky-700 focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:outline-none",children:"Создать новую"})})]})})})})]})})})}function Mr(){const e="/user/logout",{t}=_(),a=ue(),{setAuth:r}=i.useContext(Re),{theme:n}=i.useContext(me),l=V(),o=n==="dark",d=async()=>{try{await l.post(e,{})}catch(c){console.error("Logout error:",c)}finally{r({}),a("/")}};return s.jsx(K.button,{onClick:d,type:"button",className:"touch-manipulation flex h-8 w-8 items-center justify-center rounded-md p-1.5 text-sm font-bold shadow-md sm:h-10 sm:w-10 sm:text-base md:h-14 md:w-14",animate:{backgroundColor:o?"rgb(239 68 68)":"rgb(252 165 165)",color:o?"rgb(51 65 85)":"rgb(255 255 255)"},whileHover:{backgroundColor:o?"rgb(220 38 38)":"rgb(248 113 113)",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",scale:1.05},whileTap:{backgroundColor:o?"rgb(185 28 28)":"rgb(239 68 68)",scale:.95},transition:{duration:.2,ease:"easeOut"},title:t("myurls.logout"),children:s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",children:s.jsx("path",{d:"M15 4H18C19.1046 4 20 4.89543 20 6V18C20 19.1046 19.1046 20 18 20H15M8 8L4 12M4 12L8 16M4 12L16 12",stroke:"#FFFFFF",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})}function $r(){const e="/user/deleteuser",{t}=_(),a=ue(),{setAuth:r}=i.useContext(Re),{theme:n}=i.useContext(me),l=V(),[o,d]=i.useState(!1),c=n==="dark",m=()=>{d(!0)},f=async()=>{try{await l.delete(e),r({}),a("/")}catch(v){console.error("Delete user error:",v),alert(t("modal.error","Failed to delete account. Please try again."))}};return s.jsxs(s.Fragment,{children:[s.jsx(K.button,{onClick:m,type:"button",className:"touch-manipulation flex h-8 w-8 items-center justify-center rounded-md p-1.5 text-sm font-bold shadow-md sm:h-10 sm:w-10 sm:text-base md:h-14 md:w-14",animate:{backgroundColor:c?"rgb(239 68 68)":"rgb(252 165 165)",color:c?"rgb(51 65 85)":"rgb(255 255 255)"},whileHover:{backgroundColor:c?"rgb(220 38 38)":"rgb(248 113 113)",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",scale:1.05},whileTap:{backgroundColor:c?"rgb(185 28 28)":"rgb(239 68 68)",scale:.95},transition:{duration:.2,ease:"easeOut"},title:t("myurls.deleteProfile"),children:s.jsx("svg",{fill:"#FFFFFF",viewBox:"-3 -2 24 24",preserveAspectRatio:"xMinYMin",children:s.jsx("path",{d:"M6 2V1a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1h4a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2h-.133l-.68 10.2a3 3 0 0 1-2.993 2.8H5.826a3 3 0 0 1-2.993-2.796L2.137 7H2a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h4zm10 2H2v1h14V4zM4.141 7l.687 10.068a1 1 0 0 0 .998.932h6.368a1 1 0 0 0 .998-.934L13.862 7h-9.72zM7 8a1 1 0 0 1 1 1v7a1 1 0 0 1-2 0V9a1 1 0 0 1 1-1zm4 0a1 1 0 0 1 1 1v7a1 1 0 0 1-2 0V9a1 1 0 0 1 1-1z"})})}),s.jsx(oa,{isOpen:o,onClose:()=>d(!1),onConfirm:f,title:t("modal.deleteProfile.title"),message:t("modal.deleteProfile.confirm"),confirmText:t("modal.deleteProfile.confirmBtn"),cancelText:t("modal.deleteProfile.cancelBtn"),type:"danger"})]})}function Kr({profile:e}){const{t}=_();return e?s.jsx("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-lg hover:shadow-xl dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("div",{className:"flex items-center gap-6",children:[s.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-full bg-gradient-to-br from-sky-400 to-blue-600 text-3xl font-bold text-white shadow-lg dark:from-sky-500 dark:to-blue-700",children:e.username.charAt(0).toUpperCase()}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"mb-1 text-2xl font-bold text-gray-900 dark:text-gray-100",children:e.username}),s.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t("dashboard.memberSince")," ",ca(e.accountCreated)]})]}),s.jsx($r,{}),s.jsx(Mr,{})]})}):null}function J({title:e,value:t,subtitle:a,icon:r,trend:n}){return s.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-gray-200 dark:border-slate-700 p-6 hover:shadow-xl transition-all duration-200",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:e}),s.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:t}),a&&s.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a}),n&&s.jsxs("div",{className:`inline-flex items-center gap-1 mt-2 text-sm font-medium ${n.direction==="up"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[s.jsx("span",{children:n.direction==="up"?"↑":"↓"}),s.jsx("span",{children:n.value})]})]}),r&&s.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-lg bg-gradient-to-br from-sky-400 to-blue-500 dark:from-sky-500 dark:to-blue-600 text-white",children:r})]})})}function Fr({data:e,title:t}){return s.jsxs("div",{className:"relative z-10 bg-white dark:bg-slate-800 rounded-xl shadow-lg border border-gray-200 dark:border-slate-700 p-6 transition-shadow hover:shadow-xl",style:{willChange:"background-color, border-color"},children:[s.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:t}),s.jsx(fe,{width:"100%",height:300,children:s.jsxs(Ve,{data:e,children:[s.jsx(He,{strokeDasharray:"3 3",stroke:"#e5e7eb",className:"stroke-gray-200 dark:stroke-slate-700"}),s.jsx(Ge,{dataKey:"date",stroke:"#6b7280",className:"stroke-gray-500 dark:stroke-gray-400",tick:{fill:"#6b7280",className:"fill-gray-500 dark:fill-gray-400"}}),s.jsx(Ye,{stroke:"#6b7280",className:"stroke-gray-500 dark:stroke-gray-400",tick:{fill:"#6b7280"}}),s.jsx(he,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"0.5rem",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"},labelStyle:{color:"#374151"}}),s.jsx(ge,{}),s.jsx(oe,{type:"monotone",dataKey:"created",stroke:"#0ea5e9",strokeWidth:2,name:"URLs Created",dot:{fill:"#0ea5e9",r:4}}),s.jsx(oe,{type:"monotone",dataKey:"clicks",stroke:"#f43f5e",strokeWidth:2,name:"Clicks",dot:{fill:"#f43f5e",r:4}})]})})]})}function zr({topUrls:e}){const{t}=_(),{theme:a}=i.useContext(me),r=a==="dark";return s.jsxs("div",{className:"overflow-hidden rounded-xl border border-gray-200 bg-white p-6 shadow-lg dark:border-slate-700 dark:bg-slate-800",children:[s.jsx("h3",{className:"mb-6 text-xl font-bold text-gray-900 dark:text-gray-100",children:t("dashboard.topUrls")}),e.length===0?s.jsx("p",{className:"py-4 text-center text-gray-600 dark:text-gray-400",children:t("dashboard.noData")}):s.jsx("div",{className:"space-y-4",children:e.map((n,l)=>s.jsxs(K.div,{className:"motion-safe flex items-center gap-4 rounded-lg p-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0,background:r?"linear-gradient(135deg, rgb(51 65 85) 0%, rgb(30 41 59) 100%)":"linear-gradient(135deg, rgb(248 250 252) 0%, rgb(239 246 255) 100%)"},whileHover:{background:r?"linear-gradient(135deg, rgb(30 41 59) 0%, rgb(15 23 42) 100%)":"linear-gradient(135deg, rgb(239 246 255) 0%, rgb(219 234 254) 100%)",scale:1.02},transition:{duration:.6,ease:"easeOut",delay:l*.1,backgroundColor:{duration:.2,ease:"easeOut"},scale:{duration:.2,ease:"easeOut"}},children:[s.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gradient-to-br from-sky-400 to-blue-500 text-sm font-bold text-white dark:from-sky-500 dark:to-blue-600",children:l+1}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"truncate font-semibold text-gray-900 dark:text-gray-100",children:`https://shortlyurl.ru/${n.shortCode}`}),s.jsx("p",{className:"truncate text-sm text-gray-600 dark:text-gray-400",children:n.url})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-2xl font-bold text-slate-600 dark:text-rose-400",children:n.clicks}),s.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t("myurls.clicks")})]})]},n.shortCode))})]})}function Hr(){const e="/myurls/geturls",t="/myurls/analytics",a="/myurls/profile",{t:r}=_(),n=V(),l=rt(),[o,d]=i.useState([]),[c,m]=i.useState(null),[f,v]=i.useState(null),[u,x]=i.useState(!0),[b,k]=i.useState("overview"),[A,p]=i.useState(!1),P=i.useRef(),C=i.useCallback(async()=>{x(!0),p(!1);try{await l();const h=await Promise.allSettled([await n.get(e),await n.get(a),await n.get(t)]),[j,O,S]=h;j.status==="fulfilled"&&d(j.value.data),O.status==="fulfilled"&&v(O.value.data),S.status==="fulfilled"&&m(S.value.data),h.some(L=>L.status==="rejected")&&p(!0)}catch{p(!0)}finally{x(!1)}},[n,l,a,e,t]);i.useEffect(()=>{C()},[C]);const E=i.useCallback(async()=>{try{x(!0);const h=await ma(()=>n.get(e),3,1e3);d(h.data)}catch(h){console.error("Failed to fetch user URLs:",h),P.current?.addNotification(r("myurls.loaderr"),3e3)}finally{x(!1)}},[n,e]),g=i.useCallback(h=>{d(j=>j.map(O=>O._id===h._id?h:O))},[]),y=i.useCallback(h=>{d(j=>j.filter(O=>O._id!==h))},[]);return s.jsxs("div",{className:"flex w-full flex-col items-center px-4 pb-20",style:{contain:"layout style paint"},children:[s.jsx(da,{ref:P}),s.jsxs("div",{className:"w-full max-w-7xl",style:{contain:"layout style"},children:[s.jsx("div",{className:"mb-8",children:s.jsx(ua,{children:r("dashboard.title")})}),s.jsxs("div",{className:"mb-6 flex flex-row justify-between border-b border-gray-200 dark:border-slate-700",children:[s.jsxs("nav",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>k("overview"),className:`touch-manipulation border-b-2 px-4 py-3 text-sm font-semibold transition-colors md:text-base ${b==="overview"?"border-sky-500 text-sky-600 dark:text-sky-400":"border-transparent text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"}`,children:r("dashboard.overview")}),s.jsx("button",{onClick:()=>k("urls"),className:`touch-manipulation border-b-2 px-4 py-3 text-sm font-semibold transition-colors md:text-base ${b==="urls"?"border-sky-500 text-sky-600 dark:text-sky-400":"border-transparent text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"}`,children:r("dashboard.myUrls")})]}),s.jsx("p",{className:"hidden items-center text-gray-600 md:flex dark:text-gray-400",children:r("dashboard.subtitle")})]}),b==="overview"&&(u?s.jsx("div",{className:"flex min-h-[50vh] flex-col justify-center",children:s.jsx("div",{className:"flex items-center justify-center",children:s.jsx(Ie,{})})}):A?s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("div",{className:"w-full max-w-md rounded-xl border border-gray-200 bg-white p-8 shadow-lg hover:shadow-xl dark:border-slate-700 dark:bg-slate-800",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto mb-4 h-12 w-12 text-rose-500 dark:text-rose-400",stroke:"currentColor",viewBox:"0 0 20 20",children:s.jsx("use",{href:"#warn"})}),s.jsx("h3",{className:"mb-2 text-xl font-semibold text-gray-900 dark:text-gray-100",children:r("dashboard.error.title")}),s.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-400",children:r("dashboard.error.message")}),s.jsxs("button",{onClick:C,style:{transition:"var(--transition-bg)"},className:"inline-flex touch-manipulation items-center rounded-lg bg-sky-500 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-sky-600 focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:outline-none dark:bg-sky-600 dark:hover:bg-sky-700 dark:focus:ring-sky-600",children:[s.jsx("svg",{className:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r("dashboard.error.retry")]})]})})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(Kr,{profile:f}),s.jsxs("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[s.jsx(J,{title:r("dashboard.totalUrls"),value:c?.totalUrls||0,icon:s.jsx("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"h-8 w-8",children:s.jsx("path",{d:"M10,17.55,8.23,19.27a2.47,2.47,0,0,1-3.5-3.5l4.54-4.55a2.46,2.46,0,0,1,3.39-.09l.12.1a1,1,0,0,0,1.4-1.43A2.75,2.75,0,0,0,14,9.59a4.46,4.46,0,0,0-6.09.22L3.31,14.36a4.48,4.48,0,0,0,6.33,6.33L11.37,19A1,1,0,0,0,10,17.55ZM20.69,3.31a4.49,4.49,0,0,0-6.33,0L12.63,5A1,1,0,0,0,14,6.45l1.73-1.72a2.47,2.47,0,0,1,3.5,3.5l-4.54,4.55a2.46,2.46,0,0,1-3.39.09l-.12-.1a1,1,0,0,0-1.4,1.43,2.75,2.75,0,0,0,.23.21,4.47,4.47,0,0,0,6.09-.22l4.55-4.55A4.49,4.49,0,0,0,20.69,3.31Z"})})}),s.jsx(J,{title:r("dashboard.totalClicks"),value:c?.totalClicks||0,icon:s.jsxs("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),subtitle:`${c?.clicksLast7Days||0} ${r("dashboard.last7Days")}`}),s.jsx(J,{title:r("dashboard.activeUrls"),value:c?.activeUrls||0,icon:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsx(J,{title:r("dashboard.expiredUrls"),value:c?.expiredUrls||0,icon:s.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})})]}),s.jsx(Fr,{data:c?.chartData||[],title:r("dashboard.activityChart")}),s.jsx(et,{devices:c?.devices||{},browsers:c?.browsers||{},countries:c?.countries||{},referrers:c?.referrers||{},t:r}),s.jsx(zr,{topUrls:c?.topUrls||[]})]})),b==="urls"&&s.jsx(_r,{urls:o,getMyUrls:E,updateUrl:g,removeUrl:y,notificationRef:P,isLoading:u})]})]})}export{Hr as default};
