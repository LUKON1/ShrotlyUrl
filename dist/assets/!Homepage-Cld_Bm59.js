import{u as y,r as o,j as e,T as E,m as x,a as I,b as R}from"./index-ajNjwp0T.js";import{N as M,H as T}from"./h1-2Fag2-gu.js";import{u as Y}from"./useAxiosPrivate-C9clAYqJ.js";import{P as U}from"./wrapper_home-BPqVUH29.js";function $({shortUrl:a}){const{t:n}=y(),[s,d]=o.useState("");return e.jsx("button",{type:"button",className:"touch-manipulation transition-all duration-200 ease-out hover:bg-blue-500 dark:hover:bg-rose-600 active:bg-blue-600 dark:active:bg-rose-700 bg-blue-400 dark:bg-rose-500 shadow-lg hover:shadow-xl h-16 lg:h-20 w-64 text-1xl md:text-2xl lg:text-3xl p-4 rounded-lg text-white dark:text-white font-extrabold",onClick:()=>{navigator.clipboard.writeText(a).then(()=>{d(!0),setTimeout(()=>{d("")},4e3)})},children:n(s?"homepage.copied":"homepage.copy")})}function F({isLoading:a}){const{t:n}=y(),{theme:s}=o.useContext(E),d=s==="dark";return e.jsxs(x.button,{type:"submit",disabled:a,className:"motion-safe text-1xl group relative flex h-16 w-64 cursor-pointer touch-manipulation items-center justify-center overflow-hidden rounded-lg p-2 font-extrabold text-gray-900 shadow-lg hover:shadow-xl disabled:cursor-not-allowed disabled:opacity-50 md:text-2xl lg:h-20 lg:text-3xl dark:text-gray-100",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)",background:d?"linear-gradient(to right, #0ea5e9, #3b82f6)":"linear-gradient(to right, #0ea5e9, #2563eb)"},transition:{duration:.8,ease:"easeOut",delay:.2},whileHover:"hover",whileFocus:"hover",whileTap:{scale:.95},children:[e.jsx(x.div,{className:"absolute -top-4 right-32 z-10 h-40 w-40 rounded-full bg-blue-200 dark:bg-sky-800",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,scale:1.5,right:8}},transition:{duration:.5,ease:"easeOut"}}),e.jsx(x.div,{className:"absolute -top-4 right-2 z-10 h-32 w-32 rounded-full bg-slate-100 dark:bg-blue-900",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,scale:1.5,right:8}},transition:{duration:.5,ease:"easeOut"}}),e.jsx(x.div,{className:"absolute top-4 -right-12 z-10 h-24 w-24 rounded-full bg-blue-200 dark:bg-sky-800",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,right:8,scale:1.5}},transition:{duration:.5,ease:"easeOut"}}),e.jsx(x.div,{className:"absolute -top-4 right-20 z-10 h-16 w-16 rounded-full bg-sky-400 dark:bg-sky-600",style:{transition:"var(--transition-bg)"},variants:{hover:{top:4,right:8,scale:1.5}},transition:{duration:.5,ease:"easeOut"}}),e.jsx("p",{className:"relative z-10",children:n(a?"homepage.cutting":"homepage.cut")})]})}function z({qrCodeDataUrl:a,qrContainerRef:n}){return a?e.jsx("div",{ref:n,className:"relative flex flex-col items-center",children:e.jsx("img",{src:a,alt:"QR",className:"user-select-all h-64 w-64 object-contain border-5 rounded-4xl border-rose-300 dark:border-[#00a6f4]"})}):null}function A({qrCodeDataUrl:a,url:n}){const{t:s}=y(),d=()=>{if(!a)return;const h=new URL(n).hostname.split(".").slice(-2).join("."),i=document.createElement("a");i.href=a,i.download=`${h}-QRcode.png`,document.body.appendChild(i),i.click(),document.body.removeChild(i)};return e.jsx("div",{children:e.jsx("button",{onClick:d,type:"button",className:"touch-manipulation transition-all duration-200 ease-out hover:bg-blue-500 dark:hover:bg-rose-600 active:bg-blue-600 dark:active:bg-rose-700 bg-blue-400 dark:bg-rose-500 shadow-lg hover:shadow-xl h-16 lg:h-20 w-64 text-1xl md:text-2xl lg:text-3xl p-4 rounded-lg text-white dark:text-white font-extrabold",children:s("homepage.downloadqr")})})}const B=a=>{const n=window.location.host,d=[window.location.hostname,n];return new RegExp(`^(https?://)?(www.)?(${d.join("|")})(/|$)`,"i").test(a)};function P({value:a,onChange:n,options:s,className:d}){const{t:l}=y(),[g,c]=o.useState(!1),[h,i]=o.useState(!1),v=o.useRef(null),k=31536e3,[f,w]=o.useState("1"),[j,m]=o.useState(86400),p=[{label:l("homepage.urlopt.urtime.minutes"),value:60},{label:l("homepage.urlopt.urtime.hour"),value:3600},{label:l("homepage.urlopt.urtime.day"),value:86400},{label:l("homepage.urlopt.urtime.week"),value:604800},{label:l("homepage.urlopt.urtime.month"),value:2592e3},{label:l("homepage.urlopt.urtime.year"),value:31536e3}],N=s.find(t=>t.value===a),S=N?N.label:(()=>{if(h)return`${f||1} ${p.find(r=>r.value===j)?.label||""}`;const t=[...p].sort((r,O)=>O.value-r.value);for(const r of t)if(a>=r.value&&a%r.value===0)return`${Math.round(a/r.value)} ${r.label}`;return l("homepage.urlopt.urtime.custom")})(),L=t=>{n(t),i(!1),c(!1)},b=()=>{let r=(parseInt(f)||1)*j;r>k&&(r=k,w("1"),m(k)),r<60&&(r=60),n(r),c(!1)},u=t=>{t.key==="Enter"?(t.preventDefault(),b()):t.key==="Escape"&&(c(!1),i(!1))};return o.useEffect(()=>{function t(r){v.current&&!v.current.contains(r.target)&&(c(!1),i(!1))}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]),e.jsxs("div",{className:"relative z-50",ref:v,children:[e.jsxs("button",{type:"button",onClick:()=>c(!g),className:`flex touch-manipulation items-center gap-2 rounded-lg border-2 border-sky-400 bg-white px-3 py-1.5 text-center text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 focus:outline-none dark:border-sky-500 dark:bg-slate-800 dark:text-gray-200 dark:hover:bg-slate-700 ${d||""}`,children:[e.jsx("span",{className:"max-w-[120px] truncate",children:S}),e.jsx("svg",{className:`h-4 w-4 text-sky-500 transition-transform duration-200 ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&e.jsx("div",{className:"ring-opacity-5 absolute top-full right-0 mt-2 w-64 origin-top-right overflow-hidden rounded-xl border border-gray-100 bg-white shadow-xl ring-1 ring-black focus:outline-none dark:border-slate-700 dark:bg-slate-800",children:e.jsx("div",{className:"p-1",children:h?e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 uppercase dark:text-gray-400",children:l("homepage.urlopt.urtime.custom")}),e.jsx("button",{onClick:()=>i(!1),className:"text-xs text-sky-500 hover:text-sky-600 dark:text-sky-400",children:"Back"})]}),e.jsxs("div",{className:"mb-3 flex gap-2",children:[e.jsx("input",{autoFocus:!0,type:"number",min:"1",max:"999",value:f,onChange:t=>w(t.target.value),onKeyDown:u,className:"w-20 rounded-md border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900 focus:border-sky-500 focus:ring-1 focus:ring-sky-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white"}),e.jsx("select",{value:j,onChange:t=>m(parseInt(t.target.value)),className:"flex-1 rounded-md border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900 focus:border-sky-500 focus:ring-1 focus:ring-sky-500 dark:border-slate-600 dark:bg-slate-700 dark:text-white",children:p.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsx("button",{type:"button",onClick:b,className:"w-full rounded-md bg-sky-500 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-sky-600 focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:outline-none dark:hover:bg-sky-400",children:l("homepage.urlopt.urtime.confirm")})]}):e.jsxs(e.Fragment,{children:[s.map(t=>e.jsx("button",{type:"button",onClick:()=>L(t.value),className:`flex w-full items-center rounded-lg px-4 py-2 text-sm ${a===t.value?"bg-sky-50 text-sky-700 dark:bg-slate-700 dark:text-sky-400":"text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:hover:bg-slate-700"}`,children:t.label},t.value)),e.jsx("div",{className:"my-1 h-px bg-gray-100 dark:bg-slate-700"}),e.jsxs("button",{type:"button",onClick:()=>i(!0),className:"flex w-full items-center rounded-lg px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 dark:text-gray-200 dark:hover:bg-slate-700",children:[l("homepage.urlopt.urtime.custom"),"..."]})]})})})]})}const H="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2024%2024'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cpath%20id='cross-a'%20d='M0.292893219,1.70710678%20C-0.0976310729,1.31658249%20-0.0976310729,0.683417511%200.292893219,0.292893219%20C0.683417511,-0.0976310729%201.31658249,-0.0976310729%201.70710678,0.292893219%20L9.70710678,8.29289322%20C10.0976311,8.68341751%2010.0976311,9.31658249%209.70710678,9.70710678%20C9.31658249,10.0976311%208.68341751,10.0976311%208.29289322,9.70710678%20L0.292893219,1.70710678%20Z'/%3e%3cpath%20id='cross-c'%20d='M3.58578644,5%20L0.292893219,1.70710678%20C-0.0976310729,1.31658249%20-0.0976310729,0.683417511%200.292893219,0.292893219%20C0.683417511,-0.0976310729%201.31658249,-0.0976310729%201.70710678,0.292893219%20L5,3.58578644%20L8.29289322,0.292893219%20C8.68341751,-0.0976310729%209.31658249,-0.0976310729%209.70710678,0.292893219%20C10.0976311,0.683417511%2010.0976311,1.31658249%209.70710678,1.70710678%20L6.41421356,5%20L9.70710678,8.29289322%20C10.0976311,8.68341751%2010.0976311,9.31658249%209.70710678,9.70710678%20C9.31658249,10.0976311%208.68341751,10.0976311%208.29289322,9.70710678%20L5,6.41421356%20L1.70710678,9.70710678%20C1.31658249,10.0976311%200.683417511,10.0976311%200.292893219,9.70710678%20C-0.0976310729,9.31658249%20-0.0976310729,8.68341751%200.292893219,8.29289322%20L3.58578644,5%20Z'/%3e%3c/defs%3e%3cg%20fill='none'%20fill-rule='evenodd'%3e%3cg%20transform='translate(8%206)'%3e%3cmask%20id='cross-b'%20fill='%23ffffff'%3e%3cuse%20xlink:href='%23cross-a'/%3e%3c/mask%3e%3cuse%20fill='%23D8D8D8'%20fill-rule='nonzero'%20xlink:href='%23cross-a'/%3e%3cg%20fill='%23FFA0A0'%20mask='url(%23cross-b)'%3e%3crect%20width='24'%20height='24'%20transform='translate(-8%20-6)'/%3e%3c/g%3e%3c/g%3e%3cg%20transform='rotate(-90%2012%205)'%3e%3cmask%20id='cross-d'%20fill='%23ffffff'%3e%3cuse%20xlink:href='%23cross-c'/%3e%3c/mask%3e%3cuse%20fill='%23000000'%20fill-rule='nonzero'%20xlink:href='%23cross-c'/%3e%3cg%20fill='%237600FF'%20mask='url(%23cross-d)'%3e%3crect%20width='24'%20height='24'%20transform='translate(-7%20-7)'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function Q(){const a="/cut/shorter",n="https://shortlyurl.ru",{t:s}=y(),{auth:d}=I(),l=d?.userId,g=Y(),[c,h]=o.useState(""),[i,v]=o.useState(""),[k,f]=o.useState(!1),[w,j]=o.useState(""),m=o.useRef(),p=o.useRef(),N=[{value:2592e3,label:s("homepage.urlopt.urtime.month")},{value:604800,label:s("homepage.urlopt.urtime.week")},{value:86400,label:s("homepage.urlopt.urtime.day")},{value:3600,label:s("homepage.urlopt.urtime.hour")}],[C,S]=o.useState(N[0].value);o.useEffect(()=>{p.current.focus()},[]);const L=o.useCallback(async b=>{if(b.preventDefault(),!c){m.current?.addNotification(s("message.urlblank"),3e3);return}try{if(B(c))throw new Error;f(!0);const t=await(l?g:R).post(a,JSON.stringify({url:c,urlTime:C}),{headers:{"Content-Type":"application/json"}}),r=t?.data?.shortCode;if(r.length!==7)throw new Error;if(!l){const D=JSON.parse(localStorage.getItem("anonymousLinks")||"[]");D.includes(r)||(D.push(r),localStorage.setItem("anonymousLinks",JSON.stringify(D)))}const O=`${n}/${r}`;v(O),j(t?.data?.qrCodeDataUrl)}catch(u){u?.response?u.response?.status===429?m.current?.addNotification(u.response.data.error||s("message.ratelimit"),5e3):u.response?.status===400?m.current?.addNotification(u.response.data.error||s("message.invalidurl"),3e3):u.response?.status===409?m.current?.addNotification(u.response.data.error||s("message.conflicterror"),3e3):m.current?.addNotification(s("message.urlcuterror"),3e3):m.current?.addNotification(s("message.servererror"),3e3)}finally{f(!1)}},[C,c,l,g,R]);return e.jsxs(e.Fragment,{children:[e.jsx(M,{ref:m}),e.jsxs("form",{onSubmit:L,className:"flex flex-col gap-15 transition-all duration-200 ease-out md:gap-0 lg:gap-1.5",children:[e.jsxs("div",{className:"mb-6 flex flex-col items-center gap-24 md:mb-18 md:flex-row md:gap-6",children:[e.jsxs("div",{className:"relative flex flex-col",children:[c&&e.jsx("button",{className:"absolute z-10 touch-manipulation p-1",onClick:()=>h(""),type:"button",children:e.jsx("img",{className:"h-full w-8 hover:cursor-pointer lg:w-10 dark:invert",src:H,alt:"X"})}),e.jsx(x.input,{ref:p,className:"text-1xl h-16 w-3xs max-w-5xl rounded-lg border-2 border-sky-400 bg-white p-2 text-center text-gray-900 shadow-md transition-none! focus:ring-2 focus:ring-sky-500 focus:outline-none md:w-[55vw] md:text-2xl lg:h-20 lg:w-[70vw] lg:text-3xl dark:border-sky-500 dark:bg-slate-800 dark:text-gray-100 dark:focus:ring-sky-400",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.1},type:"url",value:c,onChange:b=>{const u=b?.target.value;h(u)},placeholder:s("homepage.placeholder")}),e.jsx(x.div,{className:"motion-safe absolute top-full left-0 mt-2.5 flex w-full flex-col items-center justify-center gap-4 rounded-lg border border-sky-100 bg-white/95 px-4 py-2 shadow-sm backdrop-blur-sm md:flex-row md:justify-center md:gap-8 dark:border-slate-700 dark:bg-slate-800/95",style:{zIndex:100},initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.6,ease:"easeOut",delay:.3},children:e.jsxs("div",{className:"flex w-full items-center justify-center gap-3 md:w-auto",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 md:text-base dark:text-gray-300",children:s("homepage.urlopt.urtime.liftimeword")}),e.jsx(P,{value:C,onChange:S,options:N,className:"min-w-35"})]})})]}),e.jsx(F,{isLoading:k})]}),i&&e.jsxs("div",{className:"mb-30 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-30 flex flex-col items-center justify-center gap-5 md:flex-row md:gap-6",children:[e.jsx(x.div,{className:"text-1xl box-border flex h-16 w-3xs max-w-5xl flex-col items-center justify-center overflow-hidden rounded-lg border-2 border-green-500 bg-green-50 p-2 text-center font-semibold text-green-700 shadow-lg transition-none! md:w-[55vw] md:text-2xl lg:h-20 lg:w-[70vw] lg:text-3xl dark:border-green-400 dark:bg-slate-800 dark:text-green-300",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.2},children:e.jsx("span",{className:"select-all",children:i})}),e.jsx(x.div,{className:"motion-safe",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.3},children:e.jsx($,{shortUrl:i})})]}),e.jsxs(x.div,{className:"motion-safe flex flex-col gap-5 md:flex-col-reverse md:gap-8",initial:{opacity:0,transform:"translateY(100px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.8,ease:"easeOut",delay:.4},children:[e.jsx(z,{qrCodeDataUrl:w}),e.jsx(A,{qrCodeDataUrl:w,url:c})]})]})]})]})}function K(){const{t:a}=y();return e.jsxs(U,{children:[e.jsx(T,{children:a("homepage.title")}),e.jsx(Q,{})]})}export{K as default};
